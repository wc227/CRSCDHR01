{% extends 'base.html' %}
{% block head %}
    <link rel="stylesheet" type="text/css" href="/static/css/user.css">
    <script type="text/javascript" src="/static/js/post.js"></script>
{% endblock head %}
{% block body %}
    <div class="container col-lg-7 col-lg-offset-2" id="bodyCon">
        <p class="viewLabel">职位搜索</p>
        <div class="viewBox">

            <!--职位搜索框-->
            <div class="input-group" id="searchCon">
                <input type="text" class="form-control" placeholder="关键词" id="search">
                <span class="input-group-btn">
                    <button class="btn btn-primary" type="button" id="search">Search</button>
                </span>
            </div><!-- /input-group -->

            <!--职位筛选-->
            <div class="container" id="filterCon">
                <p class="filterLabel">职位类别：</p>
                <span id="filterSpan">
                    <ol class="breadcrumb" id="filterContent">
                        <li class="active"><a href="javascript:" data-type="0">科研</a></li>
                        <li><a href="javascript:" data-type="1">设计</a></li>
                        <li><a href="javascript:" data-type="2">集成</a></li>
                        <li><a href="javascript:" data-type="3">测试</a></li>
                        <li><a href="javascript:" data-type="4">市场</a></li>
                        <li><a href="javascript:" data-type="5">管理</a></li>
                    </ol>
                </span>
                <div class="clearfix"></div>
                <p class="filterLabel">工作地点：</p>
                <span id="filterSpan">
                    <ol class="breadcrumb" id="filterContent">
                        <li class="active"><a href="javascript:" data-type="0">北京</a></li>
                        <li><a href="javascript:" data-type="1">上海</a></li>
                        <li><a href="javascript:" data-type="2">广州</a></li>
                        <li><a href="javascript:" data-type="3">西安</a></li>
                        <li><a href="javascript:" data-type="4">沈阳</a></li>
                        <li><a href="javascript:" data-type="5">武汉</a></li>
                        <li><a href="javascript:" data-type="4">新疆</a></li>
                    </ol>
                </span>
            </div><!--filterCon-->

            <!--职位列表-->
            <div class="container" id="listCon">
                <table class="table table-bordered" id="postViewList">
                    <tr class="listTitle">
                        <td>职位</td>
                        <td>工作地</td>
                        <td>类型</td>
                        <td>人数</td>
                        <td>发布日期</td>
                    </tr>

                    {% for p in positions %}
                    <tr>
                        <td><a data-toggle="modal" data-target="#postDisplay" data-post="{{ p.id }}">{{ p.post_name }}</a></td>
                        <td>{{ p.location }}</td>
                        <td>{{ p.post_type }}</td>
                        <td>{{ p.num }}</td>
                        <td>{{ p.public_date|date:'Y-m-d' }}</td>
                    </tr>
                    {% endfor %}
                </table>
            </div><!--listCon-->

        </div><!--viewBox-->
    </div><!--bodyCon-->

    <!--岗位显示模态框-->
    <div class="modal fade" tabindex="-1" role="dialog" id="postDisplay">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel"></h4>
                </div>
                <div class="modal-body">
                    <table class="table table-bordered" id="modalTable">
                        <tr>
                            <td class="info">岗位类型</td>
                            <td id="modalPostType"></td>
                            <td class="info">招聘类型</td>
                            <td id="modalApplyType"></td>
                        </tr>
                        <tr>
                            <td class="info">所在公司</td>
                            <td id="modalCompany"></td>
                            <td class="info">工作地</td>
                            <td id="modalLocation"></td>
                        </tr>
                        <tr>
                            <td class="info">所在部门</td>
                            <td id="modalDepartment"></td>
                            <td class="info">招聘人数</td>
                            <td id="modalNum"></td>
                        </tr>
                        <tr>
                            <td class="info">工作年限</td>
                            <td id="modalExp"></td>
                            <td class="info">学历要求</td>
                            <td id="modalEdu"></td>
                        </tr>
                        <tr>
                            <td class="info">发布日期</td>
                            <td id="modalPublicDate"></td>
                            <td class="info">截止日期</td>
                            <td id="modalExpireDate"></td>
                        </tr>
                    </table>
                    <label class="modalLabel">岗位描述</label>
                    <p class="modalText" id="modalResponsibilities"></p>
                    <label class="modalLabel">岗位要求</label>
                    <p class="modalText" id="modalRequirement"></p>
                </div><!-- /.modal-content -->

                <div class="modal-footer">
                    <div id="modalPostId" class="hidden"></div>
                    {% if type == 'apply' %}
                    <button type="button" class="btn btn-primary" id="applyCancel">取消申请</button>
                    <button type="button" class="btn btn-danger hidden" id="confirmCancel" data-postId>确认取消</button>
                    <button type="button" class="btn btn-success hidden" id="successCancel" data-postId>取消成功</button>
                    {% elif type == 'fav' %}
                    <button type="button" class="btn btn-primary" id="applyPost">职位申请</button>
                    <button type="button" class="btn btn-success hidden" id="applySuccess">申请成功</button>
                    <button type="button" class="btn btn-warning" id="favCancel">取消收藏</button>
                    <button type="button" class="btn btn-success hidden" id="successFavCancel" data-postId>取消成功</button>
                    {% endif %}
                    <button type="button" class="btn btn-default" data-dismiss="modal">关闭</button>
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
{% endblock %}
